
import da
PatternExpr_0 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern1_'), da.pat.FreePattern(None)])
PatternExpr_1 = da.pat.FreePattern('a')
PatternExpr_3 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern16_'), da.pat.TuplePattern([da.pat.FreePattern('n2'), da.pat.FreePattern('v')])])
PatternExpr_5 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern34_'), da.pat.TuplePattern([da.pat.FreePattern('n2'), da.pat.FreePattern(None)])])
PatternExpr_7 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern52_'), da.pat.FreePattern(None)])
PatternExpr_8 = da.pat.FreePattern('a')
PatternExpr_10 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_11 = da.pat.TuplePattern([da.pat.ConstantPattern('prepare'), da.pat.FreePattern('n')])
PatternExpr_12 = da.pat.FreePattern('p')
PatternExpr_13 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.FreePattern('n2'), da.pat.FreePattern(None)])
PatternExpr_15 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_17 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern(None)])
PatternExpr_19 = da.pat.TuplePattern([da.pat.ConstantPattern('accept'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_20 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.FreePattern('n2'), da.pat.FreePattern(None)])
PatternExpr_22 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_23 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_25 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.BoundPattern('_BoundPattern149_'), da.pat.BoundPattern('_BoundPattern150_')])
PatternExpr_26 = da.pat.FreePattern('a')
PatternExpr_28 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern164_'), da.pat.FreePattern(None)])
PatternExpr_29 = da.pat.FreePattern('a')
PatternExpr_31 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern179_'), da.pat.FreePattern(None)])
PatternExpr_32 = da.pat.FreePattern('a')
PatternExpr_34 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern194_'), da.pat.TuplePattern([da.pat.FreePattern('n2'), da.pat.FreePattern('v')])])
PatternExpr_36 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern212_'), da.pat.TuplePattern([da.pat.FreePattern('n2'), da.pat.FreePattern(None)])])
PatternExpr_38 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern230_'), da.pat.FreePattern(None)])
PatternExpr_39 = da.pat.FreePattern('a')
PatternExpr_41 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_42 = da.pat.TuplePattern([da.pat.ConstantPattern('prepare'), da.pat.FreePattern('n')])
PatternExpr_43 = da.pat.FreePattern('p')
PatternExpr_44 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.FreePattern('n2'), da.pat.FreePattern(None)])
PatternExpr_46 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_48 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern(None)])
PatternExpr_50 = da.pat.TuplePattern([da.pat.ConstantPattern('accept'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_51 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.FreePattern('n2'), da.pat.FreePattern(None)])
PatternExpr_53 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_54 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_56 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.BoundPattern('_BoundPattern327_'), da.pat.BoundPattern('_BoundPattern328_')])
PatternExpr_57 = da.pat.FreePattern('a')
PatternExpr_59 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern342_'), da.pat.FreePattern(None)])
PatternExpr_60 = da.pat.FreePattern('a')
PatternExpr_62 = da.pat.TuplePattern([da.pat.ConstantPattern('reject'), da.pat.BoundPattern('_BoundPattern357_')])
PatternExpr_63 = da.pat.BoundPattern('_BoundPattern359_')
PatternExpr_65 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern370_'), da.pat.FreePattern(None)])
PatternExpr_66 = da.pat.FreePattern('a')
PatternExpr_68 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern385_'), da.pat.TuplePattern([da.pat.FreePattern('n2'), da.pat.FreePattern('v')])])
PatternExpr_70 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern403_'), da.pat.TuplePattern([da.pat.FreePattern('n2'), da.pat.FreePattern(None)])])
PatternExpr_72 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern421_'), da.pat.FreePattern(None)])
PatternExpr_73 = da.pat.FreePattern('a')
PatternExpr_75 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_64 = da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.FreePattern(None), da.pat.BoundPattern('_BoundPattern365_')]), da.pat.TuplePattern([da.pat.ConstantPattern('reject'), da.pat.BoundPattern('_BoundPattern368_')])])
PatternExpr_76 = da.pat.TuplePattern([da.pat.ConstantPattern('prepare'), da.pat.FreePattern('n')])
PatternExpr_77 = da.pat.FreePattern('p')
PatternExpr_78 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.FreePattern('n2'), da.pat.FreePattern(None)])
PatternExpr_80 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_82 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern(None)])
PatternExpr_84 = da.pat.TuplePattern([da.pat.ConstantPattern('accept'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_85 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.FreePattern('n2'), da.pat.FreePattern(None)])
PatternExpr_87 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_88 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_90 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.BoundPattern('_BoundPattern518_'), da.pat.BoundPattern('_BoundPattern519_')])
PatternExpr_91 = da.pat.FreePattern('a')
PatternExpr_93 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern533_'), da.pat.FreePattern(None)])
PatternExpr_94 = da.pat.FreePattern('a')
PatternExpr_96 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern548_'), da.pat.FreePattern(None)])
PatternExpr_97 = da.pat.FreePattern('a')
PatternExpr_99 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern563_'), da.pat.TuplePattern([da.pat.FreePattern('n2'), da.pat.FreePattern('v')])])
PatternExpr_101 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern581_'), da.pat.TuplePattern([da.pat.FreePattern('n2'), da.pat.FreePattern(None)])])
PatternExpr_103 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.BoundPattern('_BoundPattern599_'), da.pat.FreePattern(None)])
PatternExpr_104 = da.pat.FreePattern('a')
PatternExpr_106 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_107 = da.pat.TuplePattern([da.pat.ConstantPattern('prepare'), da.pat.FreePattern('n')])
PatternExpr_108 = da.pat.FreePattern('p')
PatternExpr_109 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.FreePattern('n2'), da.pat.FreePattern(None)])
PatternExpr_111 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_113 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern(None)])
PatternExpr_115 = da.pat.TuplePattern([da.pat.ConstantPattern('accept'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_116 = da.pat.TuplePattern([da.pat.ConstantPattern('respond'), da.pat.FreePattern('n2'), da.pat.FreePattern(None)])
PatternExpr_118 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_119 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.FreePattern('n'), da.pat.FreePattern('v')])
PatternExpr_121 = da.pat.TuplePattern([da.pat.ConstantPattern('accepted'), da.pat.BoundPattern('_BoundPattern696_'), da.pat.BoundPattern('_BoundPattern697_')])
PatternExpr_122 = da.pat.FreePattern('a')
import sys
from random import randint
import time

def anyof(s):
    "return any element of set s if s is not empty or 'None' otherwise"
    return (next(iter(s)) if s else None)

class Proposer_orig(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Proposer_origReceivedEvent_0 = []
        self._Proposer_origReceivedEvent_1 = []
        self._Proposer_origReceivedEvent_2 = []
        self._Proposer_origReceivedEvent_3 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_origReceivedEvent_0', PatternExpr_0, sources=[PatternExpr_1], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_origReceivedEvent_1', PatternExpr_3, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_origReceivedEvent_2', PatternExpr_5, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_origReceivedEvent_3', PatternExpr_7, sources=[PatternExpr_8], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_origReceivedEvent_4', PatternExpr_10, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Proposer_orig_handler_0])])

    def setup(self, acceptors, r, d, w):
        self.acceptors = acceptors
        self.r = r
        self.d = d
        self.w = w
        self.n = None
        self.majority = self.acceptors
        self.count = 0

    def _da_run_internal(self):
        while True:
            self.to_consent()

    def to_consent(self):
        self.n = ((0, self.id) if (self.n == None) else ((self.n[0] + 1), self.id))
        self._send(('prepare', self.n), self.majority)
        _st_label_16 = 0
        while (_st_label_16 == 0):
            _st_label_16 += 1
            if (len({a for (_, (_, _, a), (_ConstantPattern12_, _BoundPattern13_, _)) in self._Proposer_origReceivedEvent_0 if (_ConstantPattern12_ == 'respond') if (_BoundPattern13_ == self.n)}) > (len(self.acceptors) / 2)):
                v = anyof(({v for (_, _, (_ConstantPattern28_, _BoundPattern29_, (n2, v))) in self._Proposer_origReceivedEvent_1 if (_ConstantPattern28_ == 'respond') if (_BoundPattern29_ == self.n) if (n2 == max({n2 for (_, _, (_ConstantPattern46_, _BoundPattern47_, (n2, _))) in self._Proposer_origReceivedEvent_2 if (_ConstantPattern46_ == 'respond') if (_BoundPattern47_ == self.n)}))} or {randint(1, 100)}))
                responded = {a for (_, (_, _, a), (_ConstantPattern63_, _BoundPattern64_, _)) in self._Proposer_origReceivedEvent_3 if (_ConstantPattern63_ == 'respond') if (_BoundPattern64_ == self.n)}
                self._send(('accept', self.n, v), responded)
                self.output('### chose', self.n, v)
                self.count += 1
                _st_label_16 += 1
            else:
                super()._label('_st_label_16', block=True)
                _st_label_16 -= 1

    def _Proposer_orig_handler_0(self):
        self.output('terminating')
        self.exit()
    _Proposer_orig_handler_0._labels = None
    _Proposer_orig_handler_0._notlabels = None

class Acceptor_orig(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Acceptor_origSentEvent_1 = []
        self._Acceptor_origSentEvent_2 = []
        self._Acceptor_origSentEvent_3 = []
        self._Acceptor_origSentEvent_5 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_origReceivedEvent_0', PatternExpr_11, sources=[PatternExpr_12], destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_orig_handler_1]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_origSentEvent_1', PatternExpr_13, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_origSentEvent_2', PatternExpr_15, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_origSentEvent_3', PatternExpr_17, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_origReceivedEvent_4', PatternExpr_19, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_orig_handler_2]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_origSentEvent_5', PatternExpr_20, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_origReceivedEvent_6', PatternExpr_22, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_orig_handler_3])])

    def setup(self, learners):
        self.learners = learners
        pass

    def _da_run_internal(self):
        _st_label_42 = 0
        while (_st_label_42 == 0):
            _st_label_42 += 1
            if False:
                _st_label_42 += 1
            else:
                super()._label('_st_label_42', block=True)
                _st_label_42 -= 1

    def _Acceptor_orig_handler_1(self, n, p):
        n2 = None

        def UniversalOpExpr_0():
            nonlocal n2
            for (_, _, (_ConstantPattern83_, n2, _)) in self._Acceptor_origSentEvent_1:
                if (_ConstantPattern83_ == 'respond'):
                    if (not (n > n2)):
                        return False
            return True
        if UniversalOpExpr_0():
            max_prop = anyof({(n, v) for (_, _, (_ConstantPattern97_, n, v)) in self._Acceptor_origSentEvent_2 if (_ConstantPattern97_ == 'accepted') if (n == max({n for (_, _, (_ConstantPattern111_, n, _)) in self._Acceptor_origSentEvent_3 if (_ConstantPattern111_ == 'accepted')}))})
            self._send(('respond', n, max_prop), p)
    _Acceptor_orig_handler_1._labels = None
    _Acceptor_orig_handler_1._notlabels = None

    def _Acceptor_orig_handler_2(self, n, v):
        n2 = None

        def ExistentialOpExpr_1():
            nonlocal n2
            for (_, _, (_ConstantPattern129_, n2, _)) in self._Acceptor_origSentEvent_5:
                if (_ConstantPattern129_ == 'respond'):
                    if (n2 > n):
                        return True
            return False
        if (not ExistentialOpExpr_1()):
            self._send(('accepted', n, v), self.learners)
    _Acceptor_orig_handler_2._labels = None
    _Acceptor_orig_handler_2._notlabels = None

    def _Acceptor_orig_handler_3(self):
        self.output('terminating')
        self.exit()
    _Acceptor_orig_handler_3._labels = None
    _Acceptor_orig_handler_3._notlabels = None

class Learner_orig(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Learner_origReceivedEvent_0 = []
        self._Learner_origReceivedEvent_1 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Learner_origReceivedEvent_0', PatternExpr_23, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Learner_origReceivedEvent_1', PatternExpr_25, sources=[PatternExpr_26], destinations=None, timestamps=None, record_history=True, handlers=[])])

    def setup(self, acceptors):
        self.acceptors = acceptors
        pass

    def _da_run_internal(self):
        self.learn()
        self.output('terminating')

    def learn(self):
        a = v = n = None

        def ExistentialOpExpr_2():
            nonlocal a, v, n
            for (_, _, (_ConstantPattern145_, n, v)) in self._Learner_origReceivedEvent_0:
                if (_ConstantPattern145_ == 'accepted'):
                    if (len({a for (_, (_, _, a), (_ConstantPattern160_, _BoundPattern161_, _BoundPattern162_)) in self._Learner_origReceivedEvent_1 if (_ConstantPattern160_ == 'accepted') if (_BoundPattern161_ == n) if (_BoundPattern162_ == v)}) > (len(self.acceptors) / 2)):
                        return True
            return False
        _st_label_47 = 0
        while (_st_label_47 == 0):
            _st_label_47 += 1
            if ExistentialOpExpr_2():
                self.output('learned', n, v)
                _st_label_47 += 1
            else:
                super()._label('_st_label_47', block=True)
                _st_label_47 -= 1

class Proposer_to(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Proposer_toReceivedEvent_0 = []
        self._Proposer_toReceivedEvent_1 = []
        self._Proposer_toReceivedEvent_2 = []
        self._Proposer_toReceivedEvent_3 = []
        self._Proposer_toReceivedEvent_4 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_toReceivedEvent_0', PatternExpr_28, sources=[PatternExpr_29], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_toReceivedEvent_1', PatternExpr_31, sources=[PatternExpr_32], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_toReceivedEvent_2', PatternExpr_34, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_toReceivedEvent_3', PatternExpr_36, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_toReceivedEvent_4', PatternExpr_38, sources=[PatternExpr_39], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_toReceivedEvent_5', PatternExpr_41, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Proposer_to_handler_4])])

    def setup(self, acceptors, r, d, w):
        self.acceptors = acceptors
        self.r = r
        self.d = d
        self.w = w
        self.n = None
        self.majority = self.acceptors
        self.count = 0

    def _da_run_internal(self):
        while True:
            self.to_consent()

    def to_consent(self):
        self.n = ((0, self.id) if (self.n == None) else ((self.n[0] + 1), self.id))
        self._send(('prepare', self.n), self.majority)
        t = time.clock()
        _st_label_61 = 0
        while (_st_label_61 == 0):
            _st_label_61 += 1
            if ((len({a for (_, (_, _, a), (_ConstantPattern175_, _BoundPattern176_, _)) in self._Proposer_toReceivedEvent_0 if (_ConstantPattern175_ == 'respond') if (_BoundPattern176_ == self.n)}) > (len(self.acceptors) / 2)) or (time.clock() >= (t + 1))):
                if (len({a for (_, (_, _, a), (_ConstantPattern190_, _BoundPattern191_, _)) in self._Proposer_toReceivedEvent_1 if (_ConstantPattern190_ == 'respond') if (_BoundPattern191_ == self.n)}) <= (len(self.acceptors) / 2)):
                    self.count = 1
                else:
                    v = anyof(({v for (_, _, (_ConstantPattern206_, _BoundPattern207_, (n2, v))) in self._Proposer_toReceivedEvent_2 if (_ConstantPattern206_ == 'respond') if (_BoundPattern207_ == self.n) if (n2 == max({n2 for (_, _, (_ConstantPattern224_, _BoundPattern225_, (n2, _))) in self._Proposer_toReceivedEvent_3 if (_ConstantPattern224_ == 'respond') if (_BoundPattern225_ == self.n)}))} or {randint(1, 100)}))
                    responded = {a for (_, (_, _, a), (_ConstantPattern241_, _BoundPattern242_, _)) in self._Proposer_toReceivedEvent_4 if (_ConstantPattern241_ == 'respond') if (_BoundPattern242_ == self.n)}
                    self._send(('accept', self.n, v), responded)
                    self.output('### chose', self.n, v)
                    self.count += 1
                _st_label_61 += 1
            else:
                super()._label('_st_label_61', block=True)
                _st_label_61 -= 1

    def _Proposer_to_handler_4(self):
        self.output('terminating')
        self.output('checkoutput', self.count)
        self.exit()
    _Proposer_to_handler_4._labels = None
    _Proposer_to_handler_4._notlabels = None

class Acceptor_to(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Acceptor_toSentEvent_1 = []
        self._Acceptor_toSentEvent_2 = []
        self._Acceptor_toSentEvent_3 = []
        self._Acceptor_toSentEvent_5 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_toReceivedEvent_0', PatternExpr_42, sources=[PatternExpr_43], destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_to_handler_5]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_toSentEvent_1', PatternExpr_44, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_toSentEvent_2', PatternExpr_46, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_toSentEvent_3', PatternExpr_48, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_toReceivedEvent_4', PatternExpr_50, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_to_handler_6]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_toSentEvent_5', PatternExpr_51, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_toReceivedEvent_6', PatternExpr_53, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_to_handler_7])])

    def setup(self, learners):
        self.learners = learners
        pass

    def _da_run_internal(self):
        _st_label_90 = 0
        while (_st_label_90 == 0):
            _st_label_90 += 1
            if False:
                _st_label_90 += 1
            else:
                super()._label('_st_label_90', block=True)
                _st_label_90 -= 1

    def _Acceptor_to_handler_5(self, n, p):
        n2 = None

        def UniversalOpExpr_3():
            nonlocal n2
            for (_, _, (_ConstantPattern261_, n2, _)) in self._Acceptor_toSentEvent_1:
                if (_ConstantPattern261_ == 'respond'):
                    if (not (n > n2)):
                        return False
            return True
        if UniversalOpExpr_3():
            max_prop = anyof({(n, v) for (_, _, (_ConstantPattern275_, n, v)) in self._Acceptor_toSentEvent_2 if (_ConstantPattern275_ == 'accepted') if (n == max({n for (_, _, (_ConstantPattern289_, n, _)) in self._Acceptor_toSentEvent_3 if (_ConstantPattern289_ == 'accepted')}))})
            self._send(('respond', n, max_prop), p)
    _Acceptor_to_handler_5._labels = None
    _Acceptor_to_handler_5._notlabels = None

    def _Acceptor_to_handler_6(self, n, v):
        n2 = None

        def ExistentialOpExpr_4():
            nonlocal n2
            for (_, _, (_ConstantPattern307_, n2, _)) in self._Acceptor_toSentEvent_5:
                if (_ConstantPattern307_ == 'respond'):
                    if (n2 > n):
                        return True
            return False
        if (not ExistentialOpExpr_4()):
            self._send(('accepted', n, v), self.learners)
    _Acceptor_to_handler_6._labels = None
    _Acceptor_to_handler_6._notlabels = None

    def _Acceptor_to_handler_7(self):
        self.output('terminating')
        self.exit()
    _Acceptor_to_handler_7._labels = None
    _Acceptor_to_handler_7._notlabels = None

class Learner_to(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Learner_toReceivedEvent_0 = []
        self._Learner_toReceivedEvent_1 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Learner_toReceivedEvent_0', PatternExpr_54, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Learner_toReceivedEvent_1', PatternExpr_56, sources=[PatternExpr_57], destinations=None, timestamps=None, record_history=True, handlers=[])])

    def setup(self, acceptors):
        self.acceptors = acceptors
        pass

    def _da_run_internal(self):
        self.learn()
        self.output('terminating')

    def learn(self):
        v = n = a = None

        def ExistentialOpExpr_5():
            nonlocal v, n, a
            for (_, _, (_ConstantPattern323_, n, v)) in self._Learner_toReceivedEvent_0:
                if (_ConstantPattern323_ == 'accepted'):
                    if (len({a for (_, (_, _, a), (_ConstantPattern338_, _BoundPattern339_, _BoundPattern340_)) in self._Learner_toReceivedEvent_1 if (_ConstantPattern338_ == 'accepted') if (_BoundPattern339_ == n) if (_BoundPattern340_ == v)}) > (len(self.acceptors) / 2)):
                        return True
            return False
        _st_label_95 = 0
        while (_st_label_95 == 0):
            _st_label_95 += 1
            if ExistentialOpExpr_5():
                self.output('learned', n, v)
                _st_label_95 += 1
            else:
                super()._label('_st_label_95', block=True)
                _st_label_95 -= 1

class Proposer_pe(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Proposer_peReceivedEvent_0 = []
        self._Proposer_peReceivedEvent_1 = []
        self._Proposer_peReceivedEvent_2 = []
        self._Proposer_peReceivedEvent_3 = []
        self._Proposer_peReceivedEvent_4 = []
        self._Proposer_peReceivedEvent_5 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_peReceivedEvent_0', PatternExpr_59, sources=[PatternExpr_60], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_peReceivedEvent_1', PatternExpr_62, sources=[PatternExpr_63], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_peReceivedEvent_2', PatternExpr_65, sources=[PatternExpr_66], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_peReceivedEvent_3', PatternExpr_68, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_peReceivedEvent_4', PatternExpr_70, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_peReceivedEvent_5', PatternExpr_72, sources=[PatternExpr_73], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_peReceivedEvent_6', PatternExpr_75, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Proposer_pe_handler_8])])

    def setup(self, acceptors, r, d, w):
        self.acceptors = acceptors
        self.r = r
        self.d = d
        self.w = w
        self.n = None
        self.majority = self.acceptors
        self.count = 0

    def _da_run_internal(self):
        while True:
            self.to_consent()

    def to_consent(self):
        self.n = ((0, self.id) if (self.n == None) else ((self.n[0] + 1), self.id))
        self._send(('prepare', self.n), self.majority)
        t = time.clock()
        _st_label_109 = 0
        while (_st_label_109 == 0):
            _st_label_109 += 1
            if ((len({a for (_, (_, _, a), (_ConstantPattern353_, _BoundPattern354_, _)) in self._Proposer_peReceivedEvent_0 if (_ConstantPattern353_ == 'respond') if (_BoundPattern354_ == self.n)}) > (len(self.acceptors) / 2)) or PatternExpr_64.match_iter(self._Proposer_peReceivedEvent_1, _BoundPattern365_=a, _BoundPattern368_=self.n)):
                if (len({a for (_, (_, _, a), (_ConstantPattern381_, _BoundPattern382_, _)) in self._Proposer_peReceivedEvent_2 if (_ConstantPattern381_ == 'respond') if (_BoundPattern382_ == self.n)}) <= (len(self.acceptors) / 2)):
                    self.output('preempting round :', self.n)
                    self.count = 1
                else:
                    v = anyof(({v for (_, _, (_ConstantPattern397_, _BoundPattern398_, (n2, v))) in self._Proposer_peReceivedEvent_3 if (_ConstantPattern397_ == 'respond') if (_BoundPattern398_ == self.n) if (n2 == max({n2 for (_, _, (_ConstantPattern415_, _BoundPattern416_, (n2, _))) in self._Proposer_peReceivedEvent_4 if (_ConstantPattern415_ == 'respond') if (_BoundPattern416_ == self.n)}))} or {randint(1, 100)}))
                    responded = {a for (_, (_, _, a), (_ConstantPattern432_, _BoundPattern433_, _)) in self._Proposer_peReceivedEvent_5 if (_ConstantPattern432_ == 'respond') if (_BoundPattern433_ == self.n)}
                    self._send(('accept', self.n, v), responded)
                    self.output('### chose', self.n, v)
                    self.count += 1
                _st_label_109 += 1
            else:
                super()._label('_st_label_109', block=True)
                _st_label_109 -= 1

    def _Proposer_pe_handler_8(self):
        self.output('terminating')
        self.output('checkoutput', self.count)
        self.exit()
    _Proposer_pe_handler_8._labels = None
    _Proposer_pe_handler_8._notlabels = None

class Acceptor_pe(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Acceptor_peSentEvent_1 = []
        self._Acceptor_peSentEvent_2 = []
        self._Acceptor_peSentEvent_3 = []
        self._Acceptor_peSentEvent_5 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_peReceivedEvent_0', PatternExpr_76, sources=[PatternExpr_77], destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_pe_handler_9]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_peSentEvent_1', PatternExpr_78, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_peSentEvent_2', PatternExpr_80, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_peSentEvent_3', PatternExpr_82, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_peReceivedEvent_4', PatternExpr_84, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_pe_handler_10]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_peSentEvent_5', PatternExpr_85, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_peReceivedEvent_6', PatternExpr_87, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_pe_handler_11])])

    def setup(self, learners):
        self.learners = learners
        last_preempt = None

    def _da_run_internal(self):
        _st_label_140 = 0
        while (_st_label_140 == 0):
            _st_label_140 += 1
            if False:
                _st_label_140 += 1
            else:
                super()._label('_st_label_140', block=True)
                _st_label_140 -= 1

    def _Acceptor_pe_handler_9(self, n, p):
        n2 = None

        def UniversalOpExpr_6():
            nonlocal n2
            for (_, _, (_ConstantPattern452_, n2, _)) in self._Acceptor_peSentEvent_1:
                if (_ConstantPattern452_ == 'respond'):
                    if (not (n > n2)):
                        return False
            return True
        if UniversalOpExpr_6():
            max_prop = anyof({(n, v) for (_, _, (_ConstantPattern466_, n, v)) in self._Acceptor_peSentEvent_2 if (_ConstantPattern466_ == 'accepted') if (n == max({n for (_, _, (_ConstantPattern480_, n, _)) in self._Acceptor_peSentEvent_3 if (_ConstantPattern480_ == 'accepted')}))})
            self._send(('respond', n, max_prop), p)
        else:
            self._send(('reject', n), p)
    _Acceptor_pe_handler_9._labels = None
    _Acceptor_pe_handler_9._notlabels = None

    def _Acceptor_pe_handler_10(self, n, v):
        n2 = None

        def ExistentialOpExpr_7():
            nonlocal n2
            for (_, _, (_ConstantPattern498_, n2, _)) in self._Acceptor_peSentEvent_5:
                if (_ConstantPattern498_ == 'respond'):
                    if (n2 > n):
                        return True
            return False
        if (not ExistentialOpExpr_7()):
            self._send(('accepted', n, v), self.learners)
    _Acceptor_pe_handler_10._labels = None
    _Acceptor_pe_handler_10._notlabels = None

    def _Acceptor_pe_handler_11(self):
        self.output('terminating')
        self.exit()
    _Acceptor_pe_handler_11._labels = None
    _Acceptor_pe_handler_11._notlabels = None

class Learner_pe(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Learner_peReceivedEvent_0 = []
        self._Learner_peReceivedEvent_1 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Learner_peReceivedEvent_0', PatternExpr_88, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Learner_peReceivedEvent_1', PatternExpr_90, sources=[PatternExpr_91], destinations=None, timestamps=None, record_history=True, handlers=[])])

    def setup(self, acceptors):
        self.acceptors = acceptors
        pass

    def _da_run_internal(self):
        self.learn()
        self.output('terminating')

    def learn(self):
        a = v = n = None

        def ExistentialOpExpr_8():
            nonlocal a, v, n
            for (_, _, (_ConstantPattern514_, n, v)) in self._Learner_peReceivedEvent_0:
                if (_ConstantPattern514_ == 'accepted'):
                    if (len({a for (_, (_, _, a), (_ConstantPattern529_, _BoundPattern530_, _BoundPattern531_)) in self._Learner_peReceivedEvent_1 if (_ConstantPattern529_ == 'accepted') if (_BoundPattern530_ == n) if (_BoundPattern531_ == v)}) > (len(self.acceptors) / 2)):
                        return True
            return False
        _st_label_145 = 0
        while (_st_label_145 == 0):
            _st_label_145 += 1
            if ExistentialOpExpr_8():
                self.output('learned', n, v)
                _st_label_145 += 1
            else:
                super()._label('_st_label_145', block=True)
                _st_label_145 -= 1

class Proposer_peto(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Proposer_petoReceivedEvent_0 = []
        self._Proposer_petoReceivedEvent_1 = []
        self._Proposer_petoReceivedEvent_2 = []
        self._Proposer_petoReceivedEvent_3 = []
        self._Proposer_petoReceivedEvent_4 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_petoReceivedEvent_0', PatternExpr_93, sources=[PatternExpr_94], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_petoReceivedEvent_1', PatternExpr_96, sources=[PatternExpr_97], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_petoReceivedEvent_2', PatternExpr_99, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_petoReceivedEvent_3', PatternExpr_101, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_petoReceivedEvent_4', PatternExpr_103, sources=[PatternExpr_104], destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Proposer_petoReceivedEvent_5', PatternExpr_106, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Proposer_peto_handler_12])])

    def setup(self, acceptors, r, d, w):
        self.acceptors = acceptors
        self.r = r
        self.d = d
        self.w = w
        self.n = None
        self.majority = self.acceptors
        self.count = 0

    def _da_run_internal(self):
        while True:
            self.to_consent()

    def to_consent(self):
        self.n = ((0, self.id) if (self.n == None) else ((self.n[0] + 1), self.id))
        self._send(('prepare', self.n), self.majority)
        t = time.clock()
        _st_label_159 = 0
        while (_st_label_159 == 0):
            _st_label_159 += 1
            if ((len({a for (_, (_, _, a), (_ConstantPattern544_, _BoundPattern545_, _)) in self._Proposer_petoReceivedEvent_0 if (_ConstantPattern544_ == 'respond') if (_BoundPattern545_ == self.n)}) > (len(self.acceptors) / 2)) or (time.clock() >= (t + 1))):
                if (len({a for (_, (_, _, a), (_ConstantPattern559_, _BoundPattern560_, _)) in self._Proposer_petoReceivedEvent_1 if (_ConstantPattern559_ == 'respond') if (_BoundPattern560_ == self.n)}) <= (len(self.acceptors) / 2)):
                    self.count = 1
                else:
                    v = anyof(({v for (_, _, (_ConstantPattern575_, _BoundPattern576_, (n2, v))) in self._Proposer_petoReceivedEvent_2 if (_ConstantPattern575_ == 'respond') if (_BoundPattern576_ == self.n) if (n2 == max({n2 for (_, _, (_ConstantPattern593_, _BoundPattern594_, (n2, _))) in self._Proposer_petoReceivedEvent_3 if (_ConstantPattern593_ == 'respond') if (_BoundPattern594_ == self.n)}))} or {randint(1, 100)}))
                    responded = {a for (_, (_, _, a), (_ConstantPattern610_, _BoundPattern611_, _)) in self._Proposer_petoReceivedEvent_4 if (_ConstantPattern610_ == 'respond') if (_BoundPattern611_ == self.n)}
                    self._send(('accept', self.n, v), responded)
                    self.output('### chose', self.n, v)
                    self.count += 1
                _st_label_159 += 1
            else:
                super()._label('_st_label_159', block=True)
                _st_label_159 -= 1

    def _Proposer_peto_handler_12(self):
        self.output('terminating')
        self.output('checkoutput', self.count)
        self.exit()
    _Proposer_peto_handler_12._labels = None
    _Proposer_peto_handler_12._notlabels = None

class Acceptor_peto(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Acceptor_petoSentEvent_1 = []
        self._Acceptor_petoSentEvent_2 = []
        self._Acceptor_petoSentEvent_3 = []
        self._Acceptor_petoSentEvent_5 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_petoReceivedEvent_0', PatternExpr_107, sources=[PatternExpr_108], destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_peto_handler_13]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_petoSentEvent_1', PatternExpr_109, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_petoSentEvent_2', PatternExpr_111, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_petoSentEvent_3', PatternExpr_113, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_petoReceivedEvent_4', PatternExpr_115, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_peto_handler_14]), da.pat.EventPattern(da.pat.SentEvent, '_Acceptor_petoSentEvent_5', PatternExpr_116, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Acceptor_petoReceivedEvent_6', PatternExpr_118, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_peto_handler_15])])

    def setup(self, learners):
        self.learners = learners
        pass

    def _da_run_internal(self):
        _st_label_188 = 0
        while (_st_label_188 == 0):
            _st_label_188 += 1
            if False:
                _st_label_188 += 1
            else:
                super()._label('_st_label_188', block=True)
                _st_label_188 -= 1

    def _Acceptor_peto_handler_13(self, n, p):
        n2 = None

        def UniversalOpExpr_9():
            nonlocal n2
            for (_, _, (_ConstantPattern630_, n2, _)) in self._Acceptor_petoSentEvent_1:
                if (_ConstantPattern630_ == 'respond'):
                    if (not (n > n2)):
                        return False
            return True
        if UniversalOpExpr_9():
            max_prop = anyof({(n, v) for (_, _, (_ConstantPattern644_, n, v)) in self._Acceptor_petoSentEvent_2 if (_ConstantPattern644_ == 'accepted') if (n == max({n for (_, _, (_ConstantPattern658_, n, _)) in self._Acceptor_petoSentEvent_3 if (_ConstantPattern658_ == 'accepted')}))})
            self._send(('respond', n, max_prop), p)
    _Acceptor_peto_handler_13._labels = None
    _Acceptor_peto_handler_13._notlabels = None

    def _Acceptor_peto_handler_14(self, n, v):
        n2 = None

        def ExistentialOpExpr_10():
            nonlocal n2
            for (_, _, (_ConstantPattern676_, n2, _)) in self._Acceptor_petoSentEvent_5:
                if (_ConstantPattern676_ == 'respond'):
                    if (n2 > n):
                        return True
            return False
        if (not ExistentialOpExpr_10()):
            self._send(('accepted', n, v), self.learners)
    _Acceptor_peto_handler_14._labels = None
    _Acceptor_peto_handler_14._notlabels = None

    def _Acceptor_peto_handler_15(self):
        self.output('terminating')
        self.exit()
    _Acceptor_peto_handler_15._labels = None
    _Acceptor_peto_handler_15._notlabels = None

class Learner_peto(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._Learner_petoReceivedEvent_0 = []
        self._Learner_petoReceivedEvent_1 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Learner_petoReceivedEvent_0', PatternExpr_119, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_Learner_petoReceivedEvent_1', PatternExpr_121, sources=[PatternExpr_122], destinations=None, timestamps=None, record_history=True, handlers=[])])

    def setup(self, acceptors):
        self.acceptors = acceptors
        pass

    def _da_run_internal(self):
        self.learn()
        self.output('terminating')

    def learn(self):
        v = n = a = None

        def ExistentialOpExpr_11():
            nonlocal v, n, a
            for (_, _, (_ConstantPattern692_, n, v)) in self._Learner_petoReceivedEvent_0:
                if (_ConstantPattern692_ == 'accepted'):
                    if (len({a for (_, (_, _, a), (_ConstantPattern707_, _BoundPattern708_, _BoundPattern709_)) in self._Learner_petoReceivedEvent_1 if (_ConstantPattern707_ == 'accepted') if (_BoundPattern708_ == n) if (_BoundPattern709_ == v)}) > (len(self.acceptors) / 2)):
                        return True
            return False
        _st_label_193 = 0
        while (_st_label_193 == 0):
            _st_label_193 += 1
            if ExistentialOpExpr_11():
                self.output('learned', n, v)
                _st_label_193 += 1
            else:
                super()._label('_st_label_193', block=True)
                _st_label_193 -= 1

class driverclass(da.DistProcess):

    def __init__(self, parent, initq, channel, props):
        super().__init__(parent, initq, channel, props)
        self._events.extend([])

    def setup(self, p, a, l, n, r, d, w, tp, tl):
        self.p = p
        self.a = a
        self.l = l
        self.n = n
        self.r = r
        self.d = d
        self.w = w
        self.tp = tp
        self.tl = tl
        pass

    def _da_run_internal(self):
        for i in range(self.n):
            acceptors = da.new(Acceptor_orig, num=self.a)
            proposers = da.new(Proposer_orig, (acceptors, self.r, self.d, self.w), num=self.p)
            learners = da.new(Learner_orig, acceptors, num=self.l)
            for self.p in acceptors:
                da.setup(self.p, learners)
            da.start(((acceptors | proposers) | learners))
            for self.p in learners:
                self.p.join()
            print('done')
            da.send(('done',), to=(acceptors | proposers))

def main():
    p = (int(sys.argv[1]) if (len(sys.argv) > 1) else 10)
    a = (int(sys.argv[2]) if (len(sys.argv) > 2) else 1)
    l = (int(sys.argv[3]) if (len(sys.argv) > 3) else 1)
    n = (int(sys.argv[4]) if (len(sys.argv) > 4) else 1)
    r = (int(sys.argv[5]) if (len(sys.argv) > 5) else 1)
    d = (int(sys.argv[6]) if (len(sys.argv) > 6) else 1)
    w = (int(sys.argv[7]) if (len(sys.argv) > 7) else 1)
    tp = (int(sys.argv[8]) if (len(sys.argv) > 8) else 1)
    tl = (int(sys.argv[9]) if (len(sys.argv) > 9) else 1)
    da.config(channel='reliable')
    driver = da.new(driverclass, num=1)
    da.setup(driver, (p, a, l, n, r, d, w, tp, tl))
    da.start(driver)
